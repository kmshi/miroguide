{% load i18n channels cg_helpers %}
{% extends 'base.html' %}
{% block title %}Welcome to Miro{% endblock %}
{% block head-extra %}
<script src="{{ STATIC_BASE_URL }}js/jquery.js" type="text/javascript"></script>
<script src="{{ STATIC_BASE_URL }}js/jquery.dimensions.js" type="text/javascript"></script>
<script src="{{ STATIC_BASE_URL }}js/jquery-ui.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function(){
    $('#list').removeClass('initial');
    $('#list').accordion({
header: 'dt.step'}).change(function(event, newHeader, oldHeader, newContent, oldContent) { newContent.height('auto'); });
    $('#list dd:first').height('auto');
    createVideo($('#video'), "{{ MOVIE_URL }}", 300, 226);
    $('#faqs dd').hide();
    $('#faqs dt').bind('click',
        function() {
            $(this).toggleClass('open').next().toggle('slow');
            return false;
            });
    });

function createVideo(obj, url, width, height) {
    if (navigator.platform == 'Win32') {
        /* use VLC */
        embedType = 'application/x-vlc-plugin';
        header = ''
        footer = '<input type="button" value="Play" onclick="document.video1.play();" /><input type="button" value="Pause" onclick="document.video1.pause();" /><input type="button" value="Stop" onclick="document.video1.stop();" />';
    } else if (navigator.platform.indexOf('Mac') == 0) {
        embedType = 'video/quicktime';
        header = '<object id="player" width="' + width + '" height="' + height + '" classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B"><param value="imagewindow" name="CONTROLS"/><param value="false" name="autogotourl"/><param value="radio" name="console"/><param value="true" name="autostart"/><param value="video/quicktime" name="type"/><param value="' + url +'" name="src"/>';
        footer = '</object>';
    } else {
        embedType = header = footer = '';
    }
    if (embedType) {
        obj.html(header + '<embed type="' + embedType +'" name="video1" autoplay="yes" loop="no" target="'
        + url + '" width=' + width + ' height=' + height
        + ' />' + footer);
        if (extra) {
            document.video1.play();
        }
        $('div#download').hide();
    }
}
</script>

{% endblock %} 
{% block content %}
<div class="first-time-page">
    <dl id="list" class="initial">
        <dt class="selected step"><a href="#"><span>1</span><h1>Meet Miro</h1></a></dt>
                <dd><div id="video"><img src="{{ STATIC_BASE_URL}}images/meetmiro.jpg"></div><div id="download"><a href="http://subscribe.getmiro.com/download?url1={{ MOVIE_URL|urlencode }}">Download this video</a></div></dd>
        <dt class="step"><a href="#"><span>2</span><h1>Add Your Favorite Topics to Miro</h1></a></dt>
        <dd id="channellist">
            {% fourcolumnloop  with column in channel_columns %}
                {% for channel in column %}
                    <div class="channel">
                        <span class="pack"></span>
                        <div class="subscribe"><a class="add" href="{{ channel.1 }}"><span class="icon"></span>Add {{ channel.0 }}</a></div>
                    </div>
                {% endfor %}
            {% endfourcolumnloop %}
        </dd>
        <dt class="step"><a href="#"><span>3</span><h1>Learn How to Watch!</h1></a></dt>
        <dd>
            <div class="third-step">
                <h2>Miro is doing its thing...</h2>
                <img src="{{ STATIC_BASE_URL}}images/play-downloads.png" alt="Videos downloaded in Miro">
                Miro is getting the first video from each channel.  You'll see green ovals in your sidebar when videos are ready to watch.
            </div>
            <div class="third-step">
                <h2>In the mean time,</h2>
                <img src="{{ STATIC_BASE_URL }}images/guide-preview.jpg" alt="Preview of the Miro Guide">
                Find thousands of free channels in the <a href="{{ BASE_URL }}">Miro guide</a>, add as many as you want.
            </div>
            <div id="faqs">
                <dl>
                {% for faq in faqs %}
                    <dt><a href="#">{{ faq.0 }}</a></dt>
                    <dd>{{ faq.1 }}</dd>
                {% endfor %}
                </dl>
            </div>
        </dd>
    </dl>
    <div id="nothanks">
        <h3>Skip Ahead, and find more channels:</h3>
        <input type="button" onclick="window.location='/'" value="Take me to the Channel Guide &raquo;">
    </div>
</div>
{% endblock %}
