{% load i18n channels cg_helpers %}
{% extends 'base.html' %}
{% block title %}Welcome to Miro{% endblock %}
{% block head-extra %}
<script src="{{ STATIC_BASE_URL }}js/jquery.js" type="text/javascript"></script>
<script src="{{ STATIC_BASE_URL }}js/jquery.dimensions.js" type="text/javascript"></script>
<script src="{{ STATIC_BASE_URL }}js/jquery-ui.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function(){
    $('#list').accordion({
        header: 'dt'});
    $('#channellist #channels a').bind('click', function(){
        $(this).toggleClass('subscribe');
        return false;});
    $('#channellist a#subscribemulti').bind('click', subscribeMulti);
    $('#faqs dd').hide();
    $('#faqs dt').bind('click',
        function() {
            $(this).next().toggle();
            return false;
        });
    });

function subscribeMulti() {
    var subscribes = $('a.subscribe');
    var ids = Array(subscribes.length);
    var urls = Array(subscribes.length);
    subscribes.each(function(i) {
        ids[i] = $(this).attr('channelid');
        urls[i] = "url"+(i+1)+"="+escape($(this).attr('url'));
        });
    ajaxurl = "/channels/subscribe-hit/" + ids[0] + '?' + ids.slice(1).join('&');
    oneclickurl = "http://subscribe.getmiro.com/?" + urls.join('&');
    handleSubscriptionLink(ajaxurl, oneclickurl);
    return false;
}
</script>

{% endblock %}
{% block content %}
<div class="first-time-page">
    <dl id="list">
        <dt><a href="#"><span>1</span><h1>Meet Miro</h1></a></dt>
                <dd>
<embed type="application/x-vlc-plugin" name="video1" autoplay="yes" loop="no" target="{{ MOVIE_URL }}" width=600 height=412 />
<input type="button" value="Play" onclick="document.video1.play();" />
<input type="button" value="Pause" onclick="document.video1.pause();" />
<input type="button" value="Stop" onclick="document.video1.stop();" />-
  </dd>
        <dt class="selected"><a href="#"><span>2</span><h1>Click on Your Favorite Topics</h1></a></dt>
        <dd id="channellist">
            <div id="channels">{% fourcolumnloop  with column in channel_columns %}
                    {% for channellist in column %}
                        <h2>{{ channellist.0 }}</h2>
                        <ul>
                            {% for channel in channellist.1 %}
                                <li><a channelid={{ channel.id }} url="{{ channel.url }}" href="{{ channel.get_subscription_url }}">{{ channel.name }}</a></li>
                            {% endfor %}
                        </ul>
                    {% endfor %}
                {% endfourcolumnloop %}
            </div>
            <a href="#" id="subscribemulti">Subscribe to these channels</a>
        </dd>
        <dt><a href="#"><span>3</span><h1>Get Ready to Watch!</h1></a></dt>
        <dd>Some text
            <div id="faqs">
                <dl>
                {% for faq in faqs %}
                    <dt><a href="#">{{ faq.0 }}</a></dt>
                    <dd>{{ faq.1 }}</dd>
                {% endfor %}
                </dl>
            </div>
        </dd>
    </dl>
    <div id="nothanks">
        <a href="/"><span class="icon">icon</span><h1>No thanks, just take me to the Guide!</h1></a>
    </div>
</div>
{% endblock %}
