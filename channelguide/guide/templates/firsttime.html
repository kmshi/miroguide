{% load i18n channels cg_helpers %}
{% extends 'base.html' %}
{% block title %}Welcome to Miro{% endblock %}
{% block head-extra %}
<script src="{{ STATIC_BASE_URL }}js/jquery.js" type="text/javascript"></script>
<script src="{{ STATIC_BASE_URL }}js/jquery.dimensions.js" type="text/javascript"></script>
<script src="{{ STATIC_BASE_URL }}js/jquery-ui.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function(){
    $('#list').accordion({
        header: 'dt.step'}).change(function(event, newHeader, oldHeader, newContent, oldContent) { newContent.height('auto'); });
    $('#list dd:first').height('auto');
    createVideo($('#video'), "{{ MOVIE_URL }}", 300, 225);
    $('#faqs dd').hide();
    $('#faqs dt').bind('click',
        function() {
            $(this).toggleClass('open').next().toggle();
            return false;
        });
    });

function createVideo(obj, url, width, height) {
    if (navigator.platform == 'Win32') {
        /* use VLC */
        embedType = 'application/x-vlc-plugin';
        extra = '<input type="button" value="Play" onclick="document.video1.play();" /><input type="button" value="Pause" onclick="document.video1.pause();" /><input type="button" value="Stop" onclick="document.video1.stop();" />';
    } else if (navigator.platform.indexOf('Mac') == 0) {
        embedType = 'video/quicktime';
        extra = ''
    } else {
        embedType = extra = '';
    }
    if (embedType) {
        obj.html('<embed type="' + embedType +'" name="video1" autoplay="yes" loop="no" target="'
        + url + '" width=' + width + ' height=' + height
        + ' />' + extra);
        if (extra) {
            document.video1.play();
        }
    }
}
</script>

{% endblock %} 
{% block content %}
<div class="first-time-page">
    <dl id="list">
        <dt class="selected step"><a href="#"><span>1</span><h1>Meet Miro</h1></a></dt>
                <dd><div id="video"></div><div id="download"><a href="http://subscribe.getmiro.com/download?url1={{ MOVIE_URL|urlencode }}">Download this video</a></div></dd>
        <dt class="step"><a href="#"><span>2</span><h1>Click on Your Favorite Topics</h1></a></dt>
        <dd id="channellist">
            {% fourcolumnloop  with column in channel_columns %}
                {% for channel in column %}
                    <div class="channel">
                        <div style="width:120px; height:90px; background: black;"></div>
                        <div class="subscribe"><a class="add" href="{{ channel.1 }}"><span class="icon"></span>Add {{ channel.0 }}</a></div>
                    </div>
                {% endfor %}
            {% endfourcolumnloop %}
        </dd>
        <dt class="step"><a href="#"><span>3</span><h1>Get Ready to Watch!</h1></a></dt>
        <dd>
            <div class="third-step">
                <h2>Miro is doing its thing...</h2>
                <img src="{{ STATIC_BASE_URL}}images/play-downloads.png" alt="Videos downloaded in Miro">
                Miro is getting the first video from each channel.  You'll see green ovals in your sidebar when videos are ready to watch.
            </div>
            <div class="third-step">
                <h2>In the mean time,</h2>
                <img src="{{ STATIC_BASE_URL }}images/guide-preview.jpg" alt="Preview of the Miro Guide">
                Find thousands of free channels in the <a href="{{ BASE_URL }}">Miro guide</a>, add as many as you want.
            </div>
            <div id="faqs">
                <dl>
                {% for faq in faqs %}
                    <dt><a href="#">{{ faq.0 }}</a></dt>
                    <dd>{{ faq.1 }}</dd>
                {% endfor %}
                </dl>
            </div>
        </dd>
    </dl>
    <div id="nothanks">
        <a href="/"><span class="icon">icon</span><h1>No thanks, just take me to the Guide!</h1></a>
    </div>
</div>
{% endblock %}
