{% load i18n channels  cg_helpers %}
{% extends 'base.html' %}
{% if title %}
    {% block title %}Miro - {{ title }}{% endblock %}
{% else %}
    {% block title %}Miro - {% trans "Popular" %}{%endblock %}
{% endif %}
{% block head-extra %}<script src="{{ STATIC_BASE_URL }}js/jquery.js" type="text/javascript"></script>
<script src="{{ STATIC_BASE_URL }}js/rating.js" type="text/javascript"></script>
<link rel="StyleSheet" type="text/css" href="{{ STATIC_BASE_URL }}css/rating.css">
{% endblock %}
{% block content %}
<div class="channel-list-page">
<div class="popular-channel-list">
    <h1>{% if popular_window_select %}
        {% blocktrans with popular_window_select.current_choice_label as view %}
        Most Popular {{ view }}
        {% endblocktrans %}
        {% show_view_select popular_window_select %}
    {% else %}
        {{ title }}
    {% endif %}
    </h1>
    <div class="clear"></div>
    <ul class="channel-list">
    {% for channel in pager.items %}
        <li>
            <div class="position">{{ forloop.counter|add:pager.start_item|add:"-1" }}.</div>
            {% show_channel_in_list channel %}
            <div class="ratings-bar">
                {{ channel.ratings_bar }}
                Average of {{ channel.count_rating }} rating{{ channel.count_rating|pluralize }}: <strong>{{ channel.average_rating|floatformat }}</strong> stars
            </div>
            <div class="clear"></div>
        </li>
    {% endfor %}
    </ul>
    {% show_pager pager %}
</div>
</div>
{% endblock %}
