{% extends "base.html" %}
{% load channels rating %}
{% block head %}
  {% rating_header %}
  <script type="text/javascript" src="{{ STATIC_BASE_URL }}js/infinitescroll.js"></script>
  <script type="text/javascript">
      checkScroll.loadingImage = "{{ STATIC_BASE_URL }}images/load-indicator.gif";
  </script>
{% endblock %}
{% block body %}
  {% if terms_too_short %}
  <div id="container">
    <div id="content">
      <h2>Terms too short</h2>
      I'm sorry, your search term was too short; it must be at least 3 characters.
    </div>
  </div>
  {% else %}
	<div id="container">
          {% block listing-pre-content %}{% endblock %}
		<div id="content">
                  <h3 class="search_result"><span class="{{ header_class }}">We have <strong>{{ count }}</strong> {{ title }}</span></h3>
                  {% if sort %}
                  {% sort %}
                  {% endif %}
                  {% pager 10 %}
                  <ul id="searchResults">
                    {% for channel in results %}
                    <li>
                      {% if forloop.first %}<a name="{{ page }}"></a>{% endif %}
                      {% block channel-display %}
                      {% channel channel search %}
                      <div class="searchResultsMeta">
                        {% rating channel %}
                        {% rating_meta channel %}
                        <ul class="info">
                          <li class="subscribers">Subscribes: {{ channel.subscription_count_month }}</li>
                          {% if channel.url %}
                          <li class="available">Videos Available: {{ channel.item_count }}</li>
                          {% endif %}
                        </ul>
                      </div>
                      {% endblock %}
                    </li>
                    {% endfor %}
                  </ul>
                {% if next_page %}
                <a id="next-page" href="{{ next_page }}">Next Page</a>
                {% endif %}
		</div><!--content-->
		{% if sidebar %}
		<div id="sideBar">
			<h3 class="widget_title_bar"><span class="{{ sidebar_class }}">First <strong>{{ sidebar|length }}</strong> of <strong>{{ sidebar_count }}</strong> {{ sidebar_type }}</span></h3>
			<div class="widget">
				<ul class="recommended">
                                  {% for channel in sidebar %}
                                        <li{% if forloop.last %} class="last_li"{% endif %}>
                                          {% channel channel buttons_bottom tiny %}
                                        </li>
                                  {% endfor %}
				</ul>
			</div><!--widget-->
                        {% if sidebar_url %}
			<div class="widget_close"><a href="{{ sidebar_url }}"><span>View All {{ sidebar_count }} {{ sidebar_type|title }} Matches</span></a></div>
                        {% endif %}
		</div>
                {% endif %}
	</div><!--container-->
 {% endif %}
{% endblock %}