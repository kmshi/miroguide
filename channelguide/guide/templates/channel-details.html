{% extends 'base.html' %}
{% comment %}
Copyright (c) 2008 Participatory Culture Foundation
See LICENSE for details.
{% endcomment %}
{% load i18n channels rating %}
{% block head-extra %}
  {% rating_header %}
  <script type="text/javascript">

function toggleSection(obj) {
    $(obj).parent().toggleClass("closed");
    return false;
}
    </script>
{% endblock %}
{% block title %}{{ channel.name }}{% endblock %}
{% block content %}
    <div class="channel channel-details">
      <div id="header">
	<h1>{{ channel.name }}</h1>
	{% if channel.url %}{% else %}<span id="streaming-only">{% trans "Streaming Only" %}</span>{% endif %}
	{% rating channel %}
	<a {{ channel.subscription_link }}>{% trans "Add To Favorites" %}</a>
      </div>
      <div id="website" class="section{% if channel.url %} closed{% endif %}">
	<h2 onclick="return toggleSection(this);"><a href="{{ channel.website_url}}">{% trans "Show Channel Website" %}</a></h2>
	<iframe src="{{ channel.website_url }}"></iframe>
      </div>
      <div id="details" class="section{% if channel.url %}{% else %} closed{% endif %}">
	<h2 onclick="return toggleSection(this);">{% trans "Description and Details" %}</h2>
	{{ channel.thumb_252_169 }}
	<div id="description">
	  {{ channel.description }}
	{% if items %}
	<span class="duration">{% trans "Duration:" %} {{ items.0.length }}</span>
	{% endif %}
	</div>
	{% if recommendations %}
	<div id="recommended">
	  <h3>{% trans "People Who Like This Channel Also Like" %}</h3>
	  <ul>
	    {% for rec in recommendations %}
	    <li>
	      {% channel_small rec %}
	    </li>
	    {% endfor %}
	  </ul>
      </div>
      {% endif %}
      {% if items %}
      <div id="items">
	<h3>{% trans "Recently On This Channel" %}</h3>
	<ul>
	  {% for item in items %}
	  <li>
	    {% item item %}
	  </li>
	  {% endfor %}
	</ul>
      </div>
      {% endif %}
    </div>
{% endblock %}